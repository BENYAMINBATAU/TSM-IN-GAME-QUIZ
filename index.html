<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UJIAN TSM - SMKN 1 SUMARORONG</title>

<script src="https://bundle.run/buffer@6.0.3"></script>
<script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.78.3/lib/index.iife.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@solana/spl-token@0.3.8/lib/index.iife.min.js"></script>

<style>
:root { --hijau:#4ade80; --gelap:#020617; }
body{background:var(--gelap);color:white;font-family:sans-serif;margin:0;padding:20px}
.card{background:#1e293b;border-radius:15px;padding:20px;border:2px solid var(--hijau);max-width:520px;margin:auto}
.header{text-align:center;border-bottom:2px solid #334155;padding-bottom:10px;margin-bottom:20px}
.soal{background:#0f172a;padding:15px;border-radius:10px;border-left:4px solid var(--hijau)}
.opsi{margin:10px 0}
button{width:100%;padding:14px;background:var(--hijau);color:var(--gelap);font-weight:bold;border:none;border-radius:10px;cursor:pointer;margin-top:15px}
input[type="radio"]{margin-right:8px}
input[type="text"]{width:100%;padding:12px;border-radius:8px;border:1px solid var(--hijau);background:var(--gelap);color:white}
#status{margin-top:20px;font-weight:bold}
</style>
</head>

<body>
<div class="card">
    <div class="header">
        <h2>üèçÔ∏è UJIAN DIAGNOSA MESIN</h2>
        <p style="font-size:12px;color:#94a3b8">
            XI TSM ‚Äì Guru: Benyamin Batau<br>03 Februari 2026
        </p>
    </div>

    <div id="setup">
        <label>Alamat Wallet Phantom:</label>
        <input type="text" id="wallet">
        <button onclick="mulai()">MULAI UJIAN</button>
    </div>

    <div id="quiz" style="display:none">
        <div id="soal-box"></div>
        <button onclick="next()">SOAL SELANJUTNYA</button>
    </div>

    <div id="status"></div>
</div>

<script>
window.Buffer = buffer.Buffer;

// ========================
// BANK SOAL HOTS BUSI
// ========================
const bankSoal = [
{
q:"Insulator busi berwarna hitam kering. Mesin terasa boros dan tenaga lemah. Analisis paling tepat:",
opsi:[
"Campuran bahan bakar terlalu kaya",
"Pengapian terlalu maju",
"Suhu mesin terlalu tinggi",
"Kompresi berlebih"
],
kunci:0
},
{
q:"Warna insulator putih pucat disertai gejala knocking saat tanjakan. Tindakan terbaik:",
opsi:[
"Memperkaya campuran dan cek pendinginan",
"Menggunakan busi lebih panas",
"Memajukan sudut pengapian",
"Memperbesar celah busi"
],
kunci:0
},
{
q:"Busi hitam basah dan motor sulit dihidupkan pagi hari. Penyebab paling logis:",
opsi:[
"Gagal pengapian atau campuran terlalu kaya",
"Oli mesin terlalu encer",
"Sistem pendingin rusak",
"Kompresi terlalu tinggi"
],
kunci:0
},
{
q:"Insulator cokelat keabu-abuan merata dan performa mesin normal. Kesimpulan:",
opsi:[
"Pembakaran dan pengapian optimal",
"Campuran terlalu miskin",
"Oli masuk ruang bakar",
"Pendinginan berlebih"
],
kunci:0
},
{
q:"Dua busi sama-sama hitam. Yang satu kering, yang lain basah. Perbedaan makna utamanya:",
opsi:[
"Hitam basah indikasi gagal nyala, hitam kering campuran kaya",
"Keduanya indikasi oli bocor",
"Hitam kering lebih parah",
"Tidak ada perbedaan makna"
],
kunci:0
}
];

// ========================
// ACAK
// ========================
function shuffle(a){
for(let i=a.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[a[i],a[j]]=[a[j],a[i]];
}
}

// ========================
// QUIZ ENGINE
// ========================
let soal=[], idx=0, skor=0;

function mulai(){
if(!wallet.value) return alert("Wallet wajib diisi");
setup.style.display="none";
quiz.style.display="block";

shuffle(bankSoal);
soal = bankSoal.slice(0,10).map(s=>{
    const x=JSON.parse(JSON.stringify(s));
    const benar=x.opsi[x.kunci];
    shuffle(x.opsi);
    x.kunci=x.opsi.indexOf(benar);
    return x;
});
render();
}

function render(){
const s=soal[idx];
let html=`<div class="soal"><b>Soal ${idx+1}:</b><p>${s.q}</p>`;
s.opsi.forEach((o,i)=>{
html+=`
<div class="opsi">
<label><input type="radio" name="j" value="${i}"> ${o}</label>
</div>`;
});
html+=`</div>`;
document.getElementById("soal-box").innerHTML=html;
}

function next(){
const pilih=document.querySelector("input[name='j']:checked");
if(!pilih) return alert("Pilih jawaban dulu");
if(parseInt(pilih.value)===soal[idx].kunci) skor+=10;
idx++;
if(idx<soal.length) render();
else selesai();
}

function selesai(){
quiz.style.display="none";
status.innerHTML=`Skor akhir: ${skor}<br>${skor>=70?"‚úÖ LULUS":"‚ùå TIDAK LULUS"}`;
}
</script>
</body>
</html>
